//
//  ViewController.m
//  test
//
//  Created by 风沐云烟 on 2023/12/26.
//

#import "ViewController.h"
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.

}
@end


@interface LogViewController : UIViewController

@property (nonatomic, strong) UITextView *textView;
@property (nonatomic, strong) NSMutableString *logText;

@end

@implementation LogViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    
    // 创建 UITextView 对象并设置位置和尺寸
    self.textView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
    
    // 设置文本视图属性，例如字体、颜色等
    self.textView.font = [UIFont systemFontOfSize:14];
    self.textView.textColor = [UIColor blackColor];
    
    // 将 UITextView 添加到视图层次结构中
    [self.view addSubview:self.textView];
    
    // 初始化日志文本
    self.logText = [[NSMutableString alloc] init];
}

- (void)appendLogText:(NSString *)logText {
    dispatch_async(dispatch_get_main_queue(), ^{
        // 在主线程中更新 UITextView 的文本内容
        [self.logText appendFormat:@"%@\n", logText];
        self.textView.text = self.logText;
        
        // 滚动到文本的末尾，以便始终显示最新的日志
        NSRange range = NSMakeRange(self.textView.text.length - 1, 0);
        [self.textView scrollRangeToVisible:range];
    });
}

@end
